<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Series TV</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #121212; color: white; }
    img { border-radius: 8px; }
    .table-dark th, .table-dark td { vertical-align: middle; }
    .serie-title { cursor: pointer; color: #0dcaf0; text-decoration: underline; }
    .serie-title:hover { color: #0bb7d6; }
    #detalle-serie { display: none; }
    .card { background-color: #2c2c2c; color: white; border: none; }
    .card-img-top { border-radius: 8px; max-height: 300px; object-fit: cover; }
    .card-body { padding: 1.5rem; }
    .card-title { font-size: 1.5rem; font-weight: bold; }
    .card-text { font-size: 0.95rem; }
    .btn-link { color: #0dcaf0; text-decoration: none; }
    .btn-link:hover { color: #0bb7d6; }
  </style>
</head>
<body class="p-3">

  <h1 class="text-center mb-4">Listado de Series</h1>

  <div class="row">
    <div class="col-lg-8">
      <table class="table table-bordered table-dark table-hover align-middle text-center">
        <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Channel</th>
            <th>Seasons</th>
          </tr>
        </thead>
        <tbody id="tabla-series"></tbody>
      </table>
      <p class="mt-3">Seasons average: <strong id="promedio-temporadas">6</strong></p>
    </div>

    <div class="col-lg-4">
      <div id="detalle-serie" class="card mt-3 mt-lg-0">
        <img src="" class="card-img-top" alt="" id="detalle-imagen">
        <div class="card-body">
          <h5 class="card-title" id="detalle-titulo"></h5>
          <p class="card-text" id="detalle-sinopsis"></p>
          <a href="#" class="btn btn-link p-0" id="detalle-link" target="_blank"></a>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { series } from "./data.js";

    const cuerpoTabla = document.getElementById("tabla-series");
    const detalleContainer = document.getElementById("detalle-serie");
    const detalleImagen = document.getElementById("detalle-imagen");
    const detalleTitulo = document.getElementById("detalle-titulo");
    const detalleSinopsis = document.getElementById("detalle-sinopsis");
    const detalleLink = document.getElementById("detalle-link");
    const promedioSpan = document.getElementById("promedio-temporadas");

    const promedio = series.reduce((sum, s) => sum + s.temporadas, 0) / series.length;
    promedioSpan.textContent = promedio.toFixed(0);

    series.forEach(serie => {
      const fila = document.createElement("tr");
      fila.innerHTML = `
        <td>${serie.id}</td>
        <td><span class="serie-title" data-id="${serie.id}">${serie.titulo}</span></td>
        <td>${serie.productora}</td>
        <td>${serie.temporadas}</td>
      `;
      cuerpoTabla.appendChild(fila);
    });

    document.querySelectorAll(".serie-title").forEach(span => {
      span.addEventListener("click", () => {
        const id = parseInt(span.dataset.id);
        const serie = series.find(s => s.id === id);
        if (serie) {
          detalleImagen.src = serie.caratula;
          detalleImagen.alt = serie.titulo;
          detalleTitulo.textContent = serie.titulo;
          detalleSinopsis.textContent = serie.sinopsis;
          detalleLink.href = serie.link;
          detalleLink.textContent = serie.link;
          detalleContainer.style.display = "block";
        }
      });
    });
  </script>

</body>
</html>